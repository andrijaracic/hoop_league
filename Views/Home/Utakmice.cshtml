@model List<HoopLeague.Models.ViewModels.GameCardViewModel>

@{
    int selectedRunda = ViewBag.SelectedRunda != null ? (int)ViewBag.SelectedRunda : 1;
}

<style>
    
</style>

<h2 class="standings-title">Sve utakmice</h2>

<!-- ====== SLIDER ZA RUNDE ====== -->
<div class="rounds-wrapper">
    <button class="round-arrow" type="button" onclick="slideRounds(-1)">❮</button>

    <div id="roundSlider" class="rounds-container">
        @for (int i = 1; i <= 38; i++)
        {
            var activeClass = i == selectedRunda ? "active" : "";
            <a class="round-pill @activeClass"
               href="@Url.Action("Utakmice", "Home", new { runda = i })">
                @i
            </a>
        }
    </div>

    <button class="round-arrow" type="button" onclick="slideRounds(1)">❯</button>
</div>

<!-- ====== LISTA UTAKMICA ZA IZABRANU RUNDU ====== -->
<div class="games-list">
    @if (Model != null && Model.Any())
    {
        foreach (var u in Model)
        {
            var finished = u.PoeniDomacin > 0;
            var homeWin = finished && u.PoeniDomacin > u.PoeniGost;

            <div class="game-card">
                <!-- LEVA STRANA: vreme / „arena” (placeholder) -->
                <div class="game-left">
                    <div class="game-time">@u.Datum.ToString("HH:mm")</div>
                    <div class="game-venue">Round @u.Runda</div>
                </div>

                <!-- SREDINA: timovi + rezultat/VS -->
                <div class="game-center">
                    <div class="team-block">
                        <span class="team-name">@u.DomacinSkracenica</span>
                        <img src="~/@u.DomacinLogo" alt="@u.DomacinSkracenica" />
                    </div>

                    <div>
                        @if (finished)
                        {
                            <div class="score-wrapper">
                                <div class="score-part @(homeWin ? "winner" : "loser")">
                                    @u.PoeniDomacin
                                </div>
                                <div class="score-part @(!homeWin ? "winner" : "loser")">
                                    @u.PoeniGost
                                </div>
                            </div>
                            <div class="game-status">Ended</div>
                        }
                        else
                        {
                            <div class="vs-box">VS</div>
                            <div class="game-status">
                                @u.Datum.ToString("dd.MM.yyyy")
                            </div>
                        }
                    </div>

                    <div class="team-block">
                        <img src="~/@u.GostLogo" alt="@u.GostSkracenica" />
                        <span class="team-name">@u.GostSkracenica</span>
                    </div>
                </div>

                <!-- DESNA STRANA: dugme -->
                <div class="game-right">
                    @if (finished)
                    {

                        <a class="btn-arrow" href="@Url.Action("JednaUtakmica", "Home", new { id = u.UtakmicaId })">➜</a>
                            
                    }
                </div>
            </div>
        }
    }
    else
    {
        <p style="color:white">Nema utakmica za izabranu rundu.</p>
    }
</div>

<script>
    function slideRounds(direction) {
        const slider = document.getElementById("roundSlider");
        slider.scrollLeft += direction * 200;
    }
</script>
